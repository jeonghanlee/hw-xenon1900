#
# This software is distributed under the EPICS Open License Agreement which
# can be found in the file, LICENSE, included with this distribution.
#
# 
#  Honeywell Xenon 1900 Barcode scanner
#
# macros required:
#
#  HWUNIT              : dev asyn channel name
#  SYSDEV              : Quite generic single name component
# 
#  author : Jeong Han Lee
#  email  : jeonghan.lee@gmail.com
#  Date   : 
#  version : 0.0.1
#
#------------------------------------------------------------------------------


# ReplyTimeout in the proto file should not be 0. 
# 

record(stringin, "$(SYSDEV)Formfactor")
{
    field(DESC, "Formfactor Type")
    field(DTYP, "Soft Channel")
}

record(stringin, "$(SYSDEV)Vendor")
{
    field(DESC, "Vendor Type")
    field(DTYP, "Soft Channel")
}

record(stringin, "$(SYSDEV)Location")
{
    field(DESC, "Location defined by ICS internally")
    field(DTYP, "Soft Channel")
}

record(stringin, "$(SYSDEV)Status")
{
    field(DESC, "Status")
    field(DTYP, "Soft Channel")
}

record(stringin, "$(SYSDEV)Model")
{
    field(DESC, "Model Type")
    field(DTYP, "Soft Channel")
}


record(stringin, "$(SYSDEV)RawData")
{
    field(DESC, "RAW Scanned data")
    field(DTYP, "stream")
    field( INP, "@xenon1900.proto read_raw $(PORT)")
    field(SCAN, "I/O Intr")
    field(FLNK, "$(SYSDEV)Dist_aSub")
}

record(stringin, "$(SYSDEV)SN")
{
    field(DESC, "Serial Number")
    field(DTYP, "Soft Channel")
}


record(stringin, "$(SYSDEV)JiraMessage")
{
    field(DESC, "JIRA returned Message")
    field(DTYP, "Soft Channel")
}


## A quick and dirty way to work around this issue is to set enabled in
## INAM of aSub record. And please look at comment in DisXenonASub
## It shold be matched with enum PrintStatus also.
## Thursday, June 15 02:25:08 CEST 2017

record(bi, "$(SYSDEV)EnableLabel")
{
    field(DESC, "Enable or Disable LabelPrinter")
    field(ZNAM, "Disabled")
    field(ONAM, "Enabled")
}


## PINI YES, please look at timeString in
## xenonASub.cpp
record(aSub,"$(SYSDEV)Dist_aSub")
{
    field(INAM, "InitXenonASub")
    field(SNAM, "DistXenonASub")
    field(SCAN, "Passive")
    field(INPA, "$(SYSDEV)RawData.VAL")
    field( FTA, "STRING")
    field( NOA, "1")
    field(OUTA, "$(SYSDEV)SN PP")
    field(OUTB, "$(SYSDEV)Formfactor PP" )
    field(OUTC, "$(SYSDEV)Vendor PP")
    field(OUTD, "$(SYSDEV)Location PP")
    field(OUTE, "$(SYSDEV)Status PP")
    field(OUTF, "$(SYSDEV)Model PP")
    field(OUTG, "$(SYSDEV)JiraMessage PP")
    field(OUTU, "$(SYSDEV)EnableLabel PP")
    field(FTVA, "STRING")
    field(FTVB, "STRING")
    field(FTVC, "STRING")
    field(FTVD, "STRING")
    field(FTVE, "STRING")
    field(FTVF, "STRING")
    field(FTVG, "STRING")
    field(FTVU, "ENUM")
    field(NOVA, "1")
    field(NOVB, "1")
    field(NOVC, "1")
    field(NOVD, "1")
    field(NOVE, "1")
    field(NOVF, "1")
    field(NOVG, "1")
    field(NOVU, "1")
    field(PINI, "YES")
    field(EFLG, "NEVER")

  }
